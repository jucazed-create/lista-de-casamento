<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Lista de Casamento</title>

  <!-- Firebase CDN -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

  <style>
    body {
      font-family: Georgia, serif;
      background: linear-gradient(180deg, #fff0f5, #ffffff);
      margin: 0;
      padding: 0;
      text-align: center;
    }

    header {
      padding: 40px 20px;
    }

    header img {
      width: 160px;
      height: 160px;
      border-radius: 50%;
      object-fit: cover;
      border: 4px solid #e8b4c6;
    }

    h1 {
      color: #8b3a62;
      margin-top: 20px;
    }

    p {
      color: #555;
    }

    .container {
      max-width: 700px;
      margin: auto;
      padding: 20px;
    }

    .item {
      background: white;
      border-radius: 15px;
      padding: 15px;
      margin-bottom: 20px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      text-align: left;
    }

    .item img {
      width: 100%;
      max-height: 200px;
      object-fit: cover;
      border-radius: 10px;
    }

    .item h3 {
      margin: 10px 0 5px;
      color: #8b3a62;
    }

    .item span {
      font-weight: bold;
      color: #444;
    }

    .item button {
      margin-top: 10px;
      background: #c94b6b;
      color: white;
      border: none;
      padding: 10px 16px;
      border-radius: 20px;
      cursor: pointer;
      width: 100%;
    }

    #btnAdmin {
      display: none;
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #c94b6b;
      color: white;
      border: none;
      padding: 14px 18px;
      border-radius: 30px;
      cursor: pointer;
      z-index: 9999;
    }

    .modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.6);
      justify-content: center;
      align-items: center;
      z-index: 10000;
    }

    .modal-content {
      background: white;
      padding: 20px;
      border-radius: 20px;
      width: 90%;
      max-width: 400px;
      text-align: left;
    }

    .modal-content input {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      border-radius: 10px;
      border: 1px solid #ccc;
    }

    .modal-content button {
      width: 100%;
      margin-top: 10px;
      background: #c94b6b;
      color: white;
      border: none;
      padding: 12px;
      border-radius: 20px;
      cursor: pointer;
    }
  </style>
</head>

<body>

<header>
  <img src="casal.jpg" alt="Ismael e Isadora">
  <h1>Ismael e Isadora</h1>
  <p>Com amor Deus nos uniu, Com amor, criamos nosso lar ðŸ’•</p>
</header>

<div class="container" id="lista"></div>

<button id="btnAdmin" onclick="abrirModal()">âž• Adicionar item</button>

<div class="modal" id="modal">
  <div class="modal-content">
    <h3>Novo presente</h3>
    <input id="nomeItem" placeholder="Nome do item">
    <input id="valorItem" type="number" placeholder="Valor (R$)">
    <input id="fotoItem" type="file" accept="image/*">
    <button onclick="salvarItem()">Salvar</button>
    <button onclick="fecharModal()" style="background:#aaa;">Cancelar</button>
  </div>
</div>

<script>
  // ðŸ”¥ Firebase config (SEU)
  const firebaseConfig = {
    apiKey: "AIzaSyBAsRYLwsbpnIWHzIn9MgRJ_KEbfozMzBM",
    authDomain: "lista-casamento-ismael-isadora.firebaseapp.com",
    projectId: "lista-casamento-ismael-isadora",
    storageBucket: "lista-casamento-ismael-isadora.firebasestorage.app",
    messagingSenderId: "144463156414",
    appId: "1:144463156414:web:4f0e03c3153f61d36dbaef"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  const isAdmin = new URLSearchParams(window.location.search).get("admin") === "1";
  if (isAdmin) document.getElementById("btnAdmin").style.display = "block";

  function abrirModal() {
    document.getElementById("modal").style.display = "flex";
  }

  function fecharModal() {
    document.getElementById("modal").style.display = "none";
  }

  function salvarItem() {
    const nome = nomeItem.value;
    const valor = valorItem.value;
    const foto = fotoItem.files[0];

    if (!nome || !valor || !foto) {
      alert("Preencha tudo");
      return;
    }

    const reader = new FileReader();
    reader.onload = () => {
      db.collection("itens").add({
        nome,
        valor,
        foto: reader.result,
        criadoEm: new Date()
      });
      fecharModal();
    };
    reader.readAsDataURL(foto);
  }

  db.collection("itens").orderBy("criadoEm")
    .onSnapshot(snapshot => {
      lista.innerHTML = "";
      snapshot.forEach(doc => {
        const i = doc.data();
        lista.innerHTML += `
          <div class="item">
            <img src="${i.foto}">
            <h3>${i.nome}</h3>
            <span>R$ ${i.valor}</span>
            <button onclick="window.open('https://wa.me/55SEUNUMEROAQUI')">
              Presentear
            </button>
          </div>
        `;
      });
    });
</script>

</body>
</html>
