<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Lista de Casamento</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #fafafa;
      text-align: center;
      padding: 20px;
    }

    .casal {
      width: 180px;
      border-radius: 50%;
      border: 4px solid #f3c6d9;
      margin: 10px auto;
      display: block;
    }

    h1 {
      margin: 10px 0 5px;
    }

    .frase {
      color: #777;
      margin-bottom: 25px;
    }

    #lista {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
      gap: 15px;
      max-width: 900px;
      margin: auto;
    }

    .item {
      background: #fff;
      border-radius: 14px;
      padding: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,.08);
    }

    .item img {
      width: 100%;
      height: 130px;
      object-fit: cover;
      border-radius: 10px;
      border: 1px solid #eee;
    }

    .valor {
      font-weight: bold;
      color: #444;
    }

    button {
      border: none;
      padding: 8px 14px;
      border-radius: 20px;
      cursor: pointer;
      font-weight: bold;
    }

    .btn-presentear {
      background: #f3c6d9;
      margin-top: 6px;
    }

    .btn-admin {
      background: #333;
      color: #fff;
      margin: 15px 0;
    }

    #painelAdmin {
      display: none;
      background: #fff;
      padding: 15px;
      border-radius: 12px;
      max-width: 400px;
      margin: 20px auto;
      box-shadow: 0 4px 12px rgba(0,0,0,.1);
    }

    input, textarea {
      width: 100%;
      padding: 8px;
      margin-bottom: 8px;
    }

    /* MODAL */
    #modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.5);
      align-items: center;
      justify-content: center;
    }

    #modalContent {
      background: #fff;
      padding: 20px;
      border-radius: 14px;
      max-width: 320px;
      width: 90%;
      text-align: center;
    }
  </style>
</head>

<body>

  <img src="casal.jpg" class="casal">

  <h1>Ismael e Isadora</h1>
  <p class="frase">Com amor Deus nos uniu, Com amor, criamos nosso lar ðŸ’•</p>

  <!-- BOTÃƒO ADMIN (SÃ“ COM LINK SECRETO) -->
  <button id="btnAdmin" class="btn-admin" style="display:none;">
    + Adicionar item
  </button>

  <!-- PAINEL ADMIN -->
  <div id="painelAdmin">
    <h3>Adicionar item</h3>
    <input id="nomeItem" placeholder="Nome do item">
    <input id="valorItem" type="number" placeholder="Valor (R$)">
    <input id="fotoItem" type="file" accept="image/*">
    <button class="btn-presentear" id="salvarItemBtn">Salvar</button>
  </div>

  <!-- LISTA -->
  <div id="lista"></div>

  <!-- MODAL PRESENTEAR -->
  <div id="modal">
    <div id="modalContent">
      <h3 id="modalNome"></h3>
      <p id="modalValor"></p>

      <p><strong>PIX:</strong></p>
      <p>SEU_PIX_AQUI</p>

      <textarea placeholder="Mensagem (opcional)"></textarea>

      <button class="btn-presentear" id="fecharModalBtn">
        Fechar
      </button>
    </div>
  </div>

  <!-- SCRIPT (REVISADO) -->
  <script>
    /* ========= ADMIN ========= */
    const params = new URLSearchParams(window.location.search);
    const isAdmin = params.get("admin") === "1";

    const btnAdmin = document.getElementById("btnAdmin");
    const painelAdmin = document.getElementById("painelAdmin");

    if (isAdmin) {
      btnAdmin.style.display = "inline-block";
    }

    btnAdmin.addEventListener("click", () => {
      painelAdmin.style.display =
        painelAdmin.style.display === "none" ? "block" : "none";
    });

    /* ========= DADOS ========= */
    const lista = document.getElementById("lista");
    let itens = JSON.parse(localStorage.getItem("itens")) || [];

    /* ========= SALVAR ITEM ========= */
    document.getElementById("salvarItemBtn").addEventListener("click", () => {
      const nome = nomeItem.value.trim();
      const valor = valorItem.value;
      const foto = fotoItem.files[0];

      if (!nome || !valor || !foto) {
        alert("Preencha todos os campos");
        return;
      }

      const reader = new FileReader();
      reader.onload = () => {
        itens.push({
          nome,
          valor,
          foto: reader.result
        });
        localStorage.setItem("itens", JSON.stringify(itens));
        painelAdmin.style.display = "none";
        nomeItem.value = "";
        valorItem.value = "";
        fotoItem.value = "";
        renderizar();
      };
      reader.readAsDataURL(foto);
    });

    /* ========= RENDER ========= */
    function renderizar() {
      lista.innerHTML = "";
      itens.forEach((item, index) => {
        lista.innerHTML += `
          <div class="item">
            <img src="${item.foto}">
            <p><strong>${item.nome}</strong></p>
            <p class="valor">R$ ${item.valor}</p>
            <button class="btn-presentear" onclick="abrirModal(${index})">
              Presentear
            </button>
          </div>
        `;
      });
    }

    /* ========= MODAL ========= */
    const modal = document.getElementById("modal");

    window.abrirModal = function (index) {
      modal.style.display = "flex";
      modalNome.innerText = itens[index].nome;
      modalValor.innerText = "Valor: R$ " + itens[index].valor;
    };

    document.getElementById("fecharModalBtn").addEventListener("click", () => {
      modal.style.display = "none";
    });

    renderizar();
  </script>

</body>
</html>
